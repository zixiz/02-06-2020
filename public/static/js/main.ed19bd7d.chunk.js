(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(50),c=t.n(s),l=(t(60),t(2)),o=t(13),m=t(3),i=(t(61),t(62),t(12)),u=t.n(i),d=function(e,a,t){return u.a.post("/auth/register",{email:e,full_name:a,password:t})},p=function(e,a){return u.a.post("/auth/login",{email:e,password:a}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},b=function(){localStorage.removeItem("user")},f=function(){return JSON.parse(localStorage.getItem("user"))},v=t(16),E=t.n(v),g=t(10),h=t.n(g),N=t(17),j=t.n(N),O=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},y=function(e){var a=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useState)(""),c=Object(l.a)(s,2),o=c[0],m=c[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],N=v[1],y=Object(n.useState)(""),S=Object(l.a)(y,2),w=S[0],x=S[1];return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(E.a,{onSubmit:function(n){n.preventDefault(),x(""),N(!0),a.current.validateAll(),0===t.current.context._errors.length?p(o,d).then((function(a){a.success?(e.history.push("/profile"),window.location.reload()):(x(a.error),N(!1))}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();N(!1),x(a)})):N(!1)},ref:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(h.a,{type:"text",className:"form-control",name:"email",value:o,onChange:function(e){var a=e.target.value;m(a)},validations:[O]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",className:"form-control",name:"password",value:d,onChange:function(e){var a=e.target.value;b(a)},validations:[O]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:g},g&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Sign In"))),w&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},w)),r.a.createElement(j.a,{style:{display:"none"},ref:t}))))},S=t(51),w=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},x=function(e){if(!Object(S.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},k=function(e){if(e.length<4||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 5 and 40 characters.")},C=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Full Name is required")},T=function(e){var a=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useState)(""),c=Object(l.a)(s,2),o=c[0],m=c[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),p=u[0],b=u[1],f=Object(n.useState)(""),v=Object(l.a)(f,2),g=v[0],N=v[1],O=Object(n.useState)(!1),y=Object(l.a)(O,2),S=y[0],T=y[1],F=Object(n.useState)(""),I=Object(l.a)(F,2),M=I[0],A=I[1];return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(E.a,{onSubmit:function(e){e.preventDefault(),A(""),T(!1),a.current.validateAll(),0===t.current.context._errors.length&&d(o,g,p).then((function(e){e.data.success?(A("Account successfully created, now you can sign in"),T(!0)):(A(e.data.error),T(!1))}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();A(a),T(!1)}))},ref:a},!S&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(h.a,{type:"text",className:"form-control",name:"email",value:o,onChange:function(e){var a=e.target.value;m(a)},validations:[w,x]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Full Name"),r.a.createElement(h.a,{type:"text",className:"form-control",name:"full_name",value:g,onChange:function(e){var a=e.target.value;N(a)},validations:[w,C]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",className:"form-control",name:"password",value:p,onChange:function(e){var a=e.target.value;b(a)},validations:[w,k]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Sign Up"))),M&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:S?"alert alert-success":"alert alert-danger",role:"alert"},M)),S&&r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(){e.history.push("/"),window.location.reload()}},"Go To Sign In")),r.a.createElement(j.a,{style:{display:"none"},ref:t}))))},F=t(11),I=t.n(F),M=t(18);function A(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken,"Content-Type":"application/json"}:{}}var P=function(){return u.a.get("/messages/message/",{headers:A()})},_=function(){return u.a.get("/messages/message/?filter=sent",{headers:A()})},R=function(){return u.a.get("/messages/users/",{headers:A()})},D=function(e,a,t,n){return u.a.post("/messages/message/",{sender:e,reciver:a,message:t,subject:n},{headers:A()})},J=function(e){return u.a.delete("/messages/"+"message/".concat(e),{headers:A()})},q=t(29),L=function(e){var a=Object(n.useState)({}),t=Object(l.a)(a,2),s=t[0],c=t[1],o=Object(n.useState)([]),m=Object(l.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)([]),p=Object(l.a)(d,2),b=p[0],v=p[1],E=Object(n.useState)(!1),g=Object(l.a)(E,2),h=(g[0],g[1]),N=Object(n.useState)(!1),j=Object(l.a)(N,2),O=j[0],y=j[1],S=Object(n.useState)(""),w=Object(l.a)(S,2),x=w[0],k=w[1],C=Object(n.useState)(!1),T=Object(l.a)(C,2),F=T[0],A=T[1],R=function(e){return 0===e.length?A(!0):A(!1)};Object(n.useEffect)((function(){h(!0);var e=f();e&&c(e),O?_().then((function(e){v(e.data.response),h(!1),R(e.data.response)})):P().then((function(e){u(e.data.response),h(!1),R(e.data.response)}))}),[O]);var D=function(){var e=Object(M.a)(I.a.mark((function e(){var a,t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=13;break}return e.next=3,J(x);case 3:return e.sent,e.next=6,_();case 6:a=e.sent,v(a.data.response),R(a.data.response),h(!1),k(""),e.next=23;break;case 13:return e.next=15,J(x);case 15:return e.sent,e.next=18,P();case 18:t=e.sent,u(t.data.response),R(t.data.response),h(!1),k("");case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("strong",null,"Hello ",s.full_name),r.a.createElement("label",{className:"switch switch-yes-no"},r.a.createElement("input",{onClick:function(){return y(!O)},className:"switch-input",type:"checkbox"}),r.a.createElement("span",{className:"switch-label","data-on":"Sent","data-off":"Inbox"}),r.a.createElement("span",{className:"switch-handle"}))),r.a.createElement("div",{className:"col-sm-9"},F?r.a.createElement("div",{className:"card text-center"},O?r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"There aren't any sent messages yet."),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){e.history.push("/compose"),window.location.reload()}},"Compose Message")):r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"There are no messages yet."))):r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,O?r.a.createElement("th",{scope:"col"},"Sender"):r.a.createElement("th",{scope:"col"},"From"),r.a.createElement("th",{scope:"col"},"Subject"),r.a.createElement("th",{scope:"col"},"Message"))),O?r.a.createElement("tbody",null,b.map((function(e){return r.a.createElement("tr",{key:e.id.toString()},r.a.createElement("th",null,e.user.email),r.a.createElement("td",null,e.subject),r.a.createElement("td",{className:"d-flex justify-content-between"},e.message," ",r.a.createElement(q.a,{onClick:function(){return k(e.id.toString())},"data-toggle":"modal","data-target":"#deleteMessagePrompt"})))}))):r.a.createElement("tbody",null,i.map((function(e){return r.a.createElement("tr",{key:e.id.toString()},r.a.createElement("th",null,e.user.email),r.a.createElement("td",null,e.subject),r.a.createElement("td",{className:"d-flex justify-content-between"},e.message," ",r.a.createElement(q.a,{onClick:function(){return k(e.id.toString())},"data-toggle":"modal","data-target":"#deleteMessagePrompt"})))})))))),r.a.createElement("div",{className:"modal fade",id:"deleteMessagePrompt",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteMessagePromptLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Are you sure you want to DELETE?"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},"This will delete the message for both the sender and reciver."),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:D},"Delete"))))))},B=t(52),U=t.n(B),W=t(53),G=t.n(W),H=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")};function $(e){return z.apply(this,arguments)}function z(){return(z=Object(M.a)(I.a.mark((function e(a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,a)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(){var e=Object(n.useRef)(),a=Object(n.useRef)(),t=Object(n.useState)([]),s=Object(l.a)(t,2),c=s[0],o=s[1],m=Object(n.useState)(!1),i=Object(l.a)(m,2),u=i[0],d=i[1],p=Object(n.useState)(""),b=Object(l.a)(p,2),v=b[0],g=b[1],N=Object(n.useState)(void 0),O=Object(l.a)(N,2),y=O[0],S=O[1],w=Object(n.useState)(""),x=Object(l.a)(w,2),k=x[0],C=x[1],T=Object(n.useState)({}),F=Object(l.a)(T,2),A=F[0],P=F[1],_=Object(n.useState)(!1),J=Object(l.a)(_,2),q=J[0],L=J[1],B=Object(n.useState)(""),W=Object(l.a)(B,2),z=W[0],K=W[1];Object(n.useEffect)((function(){function e(){return(e=Object(M.a)(I.a.mark((function e(){var a,t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return a=e.sent,P(a),e.next=6,R();case 6:t=e.sent,o(t.data.response);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var Q=function(){var t=Object(M.a)(I.a.mark((function t(n){var r,s,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),K(""),L(!1),d(!0),e.current.validateAll(),0!==a.current.context._errors.length){t.next=36;break}return t.prev=6,r={sender:parseInt(A.id),reciver:parseInt(y),message:v,subject:k},t.next=10,D(r);case 10:if(!(s=t.sent).data.success){t.next=24;break}return K("The Message sent Successfuly"),d(!1),L(!0),t.next=17,$(3e3);case 17:L(!1),K(""),S(void 0),C(""),g(""),t.next=26;break;case 24:K(s.data.error),L(!1);case 26:t.next=34;break;case 28:t.prev=28,t.t0=t.catch(6),c=t.t0.response&&t.t0.response.data&&t.t0.response.data.message||t.t0.message||t.t0.toString(),L(!1),K(c),d(!1);case 34:t.next=37;break;case 36:d(!1);case 37:case"end":return t.stop()}}),t,null,[[6,28]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"}),r.a.createElement("div",{className:"row"},r.a.createElement(E.a,{ref:e,onSubmit:Q,className:"col-md-6 offset-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputAddress"},"From"),r.a.createElement(h.a,{disabled:!0,type:"text",value:A.email,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputAddress2"},"To"),r.a.createElement(G.a,{value:y,name:"sendTo",onChange:function(e){var a=e.target.value;S(a),console.log(a)},className:"form-control",validations:[H]},r.a.createElement("option",{value:!0}," -- select an option -- "),c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.email)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputAddress"},"Subject"),r.a.createElement(h.a,{type:"text",value:k,name:"subject",onChange:function(e){var a=e.target.value;C(a)},className:"form-control",validations:[H]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inputAddress"},"Message"),r.a.createElement(U.a,{type:"text",value:v,name:"emailMessage",onChange:function(e){var a=e.target.value;g(a)},className:"form-control",validations:[H]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:u},u&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Send Message"))),z&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:q?"alert alert-success":"alert alert-danger",role:"alert"},z)),r.a.createElement(j.a,{style:{display:"none"},ref:a}))))},Q=function(){var e=Object(n.useState)(void 0),a=Object(l.a)(e,2),t=a[0],s=a[1];Object(n.useEffect)((function(){var e=f();e&&s(e)}),[]);return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},t?r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/compose",className:"nav-link"},"Compose Message")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/profile",className:"nav-link"},"Profile")),r.a.createElement("li",{className:"nav-item "},r.a.createElement("a",{href:"/",className:"nav-link",onClick:function(){b()}},"Log Out"))):r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/",className:"nav-link"},"Sign In")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{to:"/register",className:"nav-link"},"Sign Up")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:y}),r.a.createElement(m.a,{exact:!0,path:"/register",component:T}),r.a.createElement(m.a,{exact:!0,path:"/profile",component:L}),r.a.createElement(m.a,{exact:!0,path:"/compose",component:K})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,a,t){e.exports=t(148)},60:function(e,a,t){},62:function(e,a,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.ed19bd7d.chunk.js.map